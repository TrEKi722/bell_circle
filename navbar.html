<nav class="navbar">
  <div class="navbar-content">
    <div class="navbar-left">
      <img class="navbar-logo" src="/Media/Logos/Logotype_LightPrimary.png" alt="Bell Circle Logo">
      <!-- <span class="navbar-logo-text">Bell Circle</span> -->
    </div>
    <button class="navbar-hamburger" aria-label="Open menu" tabindex="0">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="navbar-links">
      <a href="../">Home</a>
      <a href="/avms">AVMS</a>
      <a href="/djams">DJAMS</a>
      <a href="/fnms">FNMS</a>
      <a href="/comingsoon">NHMS</a>
      <a href="/anhs">Aliso Niguel</a>
      <a href="/comingsoon">Dana Hills</a>
      <a href="/comingsoon">Tesoro</a>
      <div class="navbar-dropdown" tabindex="0">
        <span class="navbar-dropbtn">Other</span>
        <div class="navbar-dropdown-content">
          <!-- <a href="/blog">Blog</a> -->
          <a href="/feedback">Feedback</a>
          <a href="/change-log">Change Log</a>
          <a href="/privacy">Privacy Policy</a>
          <!-- <a href="/about">About</a> -->
        </div>
      </div>
      <div class="theme-toggle-container">
        <label class="switch">
          <input type="checkbox" id="themeToggle" name="themeToggle">
          <span class="slider round"></span>
        </label>
      </div>
    </div>
  </div>
  <!-- Sliding Hamburger Menu Drawer -->
  <div class="navbar-hamburger-menu">
    <a href="../">Home</a>
    <a href="/avms">AVMS</a>
    <a href="/djams">DJAMS</a>
    <a href="/fnms">FNMS</a>
    <a href="/nhms">NHMS</a>
    <a href="/anhs">Aliso Niguel</a>
    <a href="/dhhs">Dana Hills</a>
    <a href="/tesoro">Tesoro</a>
    <div class="navbar-dropdown">
      <span class="navbar-dropbtn">Other</span>
      <div class="navbar-dropdown-content">
        <a href="/blog">Blog</a>
        <a href="/feedback">Feedback</a>
        <a href="/change-log">Change Log</a>
        <a href="/privacy">Privacy Policy</a>
        <a href="/about">About</a>
      </div>
    </div>
    <div class="theme-toggle-container">
      <label class="switch">
        <input type="checkbox" id="themeToggleMobile" name="themeToggleMobile">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
</nav>

<script>
  // Theme initialization - runs immediately after navbar is injected
  function initThemeToggles() {
    const themeToggle = document.getElementById('themeToggle');
    const themeToggleMobile = document.getElementById('themeToggleMobile');
    
    if (!themeToggle || !themeToggleMobile) return;
    
    // Get current theme from stylesheet
    function getCurrentTheme() {
      const styleLink = document.querySelector('link[rel="stylesheet"]');
      if (styleLink) {
        const href = styleLink.getAttribute('href');
        if (href.includes('dark.css')) {
          return 'dark';
        }
      }
      return localStorage.getItem('theme') || 'light';
    }
    
    // Apply theme
    function applyTheme(theme) {
      const styleLink = document.querySelector('link[rel="stylesheet"]');
      if (!styleLink) return;
      
      const href = styleLink.getAttribute('href');
      let newHref = href;
      
      if (theme === 'dark') {
        newHref = href.replace(/light\.css/g, 'dark.css');
      } else {
        newHref = href.replace(/dark\.css/g, 'light.css');
      }
      
      if (newHref !== href) {
        styleLink.setAttribute('href', newHref);
      }
      
      localStorage.setItem('theme', theme);
      updateToggles(theme);
    }
    
    // Update toggle states
    function updateToggles(theme) {
      const isDark = theme === 'dark';
      themeToggle.checked = isDark;
      themeToggleMobile.checked = isDark;
    }
    
    // Initialize
    const currentTheme = getCurrentTheme();
    updateToggles(currentTheme);
    
    // Add listeners
    themeToggle.addEventListener('change', function() {
      const newTheme = this.checked ? 'dark' : 'light';
      applyTheme(newTheme);
      themeToggleMobile.checked = this.checked;
    });
    
    themeToggleMobile.addEventListener('change', function() {
      const newTheme = this.checked ? 'dark' : 'light';
      applyTheme(newTheme);
      themeToggle.checked = this.checked;
    });
  }
  
  // Run immediately
  initThemeToggles();
</script>