<nav class="navbar">
  <div class="navbar-content">
    <div class="navbar-left">
      <img class="navbar-logo" src="/Media/Logos/Logotype_LightPrimary.png" alt="Bell Circle Logo">
      <!-- <span class="navbar-logo-text">Bell Circle</span> -->
    </div>
    <button class="navbar-hamburger" aria-label="Open menu" tabindex="0">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="navbar-links">
      <a href="../">Home</a>
      <a href="/avms">AVMS</a>
      <a href="/djams">DJAMS</a>
      <a href="/fnms">FNMS</a>
      <a href="/comingsoon">NHMS</a>
      <a href="/anhs">Aliso Niguel</a>
      <a href="/comingsoon">Dana Hills</a>
      <a href="/comingsoon">Tesoro</a>
      <div class="navbar-dropdown" tabindex="0">
        <span class="navbar-dropbtn">Other</span>
        <div class="navbar-dropdown-content">
          <!-- <a href="/blog">Blog</a> -->
          <a href="/feedback">Feedback</a>
          <a href="/change-log">Change Log</a>
          <a href="/privacy">Privacy Policy</a>
          <!-- <a href="/about">About</a> -->
        </div>
      </div>
      <div class="theme-toggle-container">
        <label class="switch">
          <input type="checkbox" id="themeToggle" name="themeToggle">
          <span class="slider round"></span>
        </label>
      </div>
    </div>
  </div>
  <!-- Sliding Hamburger Menu Drawer -->
  <div class="navbar-hamburger-menu">
    <a href="../">Home</a>
    <a href="/avms">AVMS</a>
    <a href="/djams">DJAMS</a>
    <a href="/fnms">FNMS</a>
    <a href="/nhms">NHMS</a>
    <a href="/anhs">Aliso Niguel</a>
    <a href="/dhhs">Dana Hills</a>
    <a href="/tesoro">Tesoro</a>
    <div class="navbar-dropdown">
      <span class="navbar-dropbtn">Other</span>
      <div class="navbar-dropdown-content">
        <a href="/blog">Blog</a>
        <a href="/feedback">Feedback</a>
        <a href="/change-log">Change Log</a>
        <a href="/privacy">Privacy Policy</a>
        <a href="/about">About</a>
      </div>
    </div>
    <div class="theme-toggle-container">
      <label class="switch">
        <input type="checkbox" id="themeToggleMobile" name="themeToggleMobile">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
</nav>

<script>
  // Theme functions - globally accessible
  window.getCurrentTheme = function() {
    const styleLink = document.querySelector('link[rel="stylesheet"]');
    if (styleLink) {
      const href = styleLink.getAttribute('href');
      console.log('Current stylesheet href:', href);
      if (href.includes('dark.css')) {
        console.log('Theme detected: dark');
        return 'dark';
      }
    }
    const savedTheme = localStorage.getItem('theme') || 'light';
    console.log('Theme from localStorage:', savedTheme);
    return savedTheme;
  };
  
  window.applyTheme = function(theme) {
    console.log('Applying theme:', theme);
    const styleLink = document.querySelector('link[rel="stylesheet"]');
    if (!styleLink) {
      console.error('Stylesheet link not found');
      return;
    }
    
    const href = styleLink.getAttribute('href');
    console.log('Current href:', href);
    let newHref = href;
    
    if (theme === 'dark') {
      newHref = href.replace(/light\.css/g, 'dark.css');
    } else {
      newHref = href.replace(/dark\.css/g, 'light.css');
    }
    
    console.log('New href:', newHref);
    
    if (newHref !== href) {
      styleLink.setAttribute('href', newHref);
      console.log('Stylesheet changed to:', newHref);
    }
    
    localStorage.setItem('theme', theme);
    console.log('Theme saved to localStorage:', theme);
    window.updateToggles(theme);
  };
  
  window.updateToggles = function(theme) {
    console.log('Updating toggle states for theme:', theme);
    const themeToggle = document.getElementById('themeToggle');
    const themeToggleMobile = document.getElementById('themeToggleMobile');
    
    if (!themeToggle) console.error('themeToggle not found');
    if (!themeToggleMobile) console.error('themeToggleMobile not found');
    
    const isDark = theme === 'dark';
    if (themeToggle) themeToggle.checked = isDark;
    if (themeToggleMobile) themeToggleMobile.checked = isDark;
    console.log('Toggles updated. Checked:', isDark);
  };
  
  // Initialize theme
  window.initThemeToggles = function() {
    console.log('Initializing theme toggles...');
    const themeToggle = document.getElementById('themeToggle');
    const themeToggleMobile = document.getElementById('themeToggleMobile');
    
    console.log('themeToggle element:', themeToggle);
    console.log('themeToggleMobile element:', themeToggleMobile);
    
    if (!themeToggle || !themeToggleMobile) {
      console.error('Theme toggle elements not found!');
      return;
    }
    
    // Initialize
    const currentTheme = window.getCurrentTheme();
    window.updateToggles(currentTheme);
    
    // Add listeners
    themeToggle.addEventListener('change', function() {
      console.log('Desktop toggle changed. Checked:', this.checked);
      const newTheme = this.checked ? 'dark' : 'light';
      window.applyTheme(newTheme);
      themeToggleMobile.checked = this.checked;
    });
    
    themeToggleMobile.addEventListener('change', function() {
      console.log('Mobile toggle changed. Checked:', this.checked);
      const newTheme = this.checked ? 'dark' : 'light';
      window.applyTheme(newTheme);
      themeToggle.checked = this.checked;
    });
    
    console.log('Theme toggle initialization complete');
  };
  
  // Run initialization
  window.initThemeToggles();
</script>